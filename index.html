<!DOCTYPE html>
<html>
    <head>
    <title>
        Etch-a-Sketch
    </title>
    <link href="https://fonts.googleapis.com/css2?family=Yellowtail&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <h1>Etch-a-Sketch</h1>
        <div id="sideBox">
            <button>Reset and resize grid</button>
            <p>Colours:</p>
            <div id="coloursBox">
                <div id="black" class="colours"></div>
                <div id="red" class="colours"></div>
                <div id="random" class="colours"></div>
            </div>
        </div>        
        <div id="gridContainer">                  
        </div>               
        <script>
            let userColour = "rainbow";
            let gridContainer = document.querySelector('#gridContainer');            

            function createCssGrid(size) {                                      
                gridContainer.style.gridTemplateColumns = `repeat(${size}, 1fr`;
                gridContainer.style.gridTemplateRows = `repeat(${size}, 1fr)`;                              
            
                createGridSquares(size);
            }

            //create initial grid 32x32 squares
            createCssGrid(32);
            
            function createGridSquares(size) { 

            for (let i = 0; i < size**2; i++) {                
                let gridSquare = document.createElement('div');                
                gridSquare.classList.add('gridSquare');                                                     
                gridContainer.appendChild(gridSquare);                

                // gridSquare.addEventListener('mouseenter', () => {
                //     gridSquare.style.backgroundColor = "black";
                // });

                gridSquare.addEventListener('mouseover', () => {
                    
                    if (userColour == "black") {
                        gridSquare.style.backgroundColor = "black";
                    } else if (userColour == "red") {
                        gridSquare.style.backgroundColor = "red";
                    } else if (userColour == "rainbow") {
                        
                        let red = Math.floor((Math.random() * 255) + 1);
                        let green = Math.floor((Math.random() * 255) + 1);
                        let blue = Math.floor((Math.random() * 255) + 1);
                        gridSquare.style.backgroundColor = `rgb(${red}, ${green}, ${blue}`;
                    }


                });
               
                }
            }    

            function clearGrid() {
                let container = document.querySelector('#gridContainer');
                
                let square = document.querySelectorAll('.gridSquare');
                square.forEach(function(e){
                    container.removeChild(container.lastChild);
                });

                }                   

                document.querySelector('button').onclick = function() {                
                let newGrid = prompt("How many squares in each direction should the grid have? (1-64)");
                clearGrid();
                createCssGrid(newGrid);
            }

        </script>
    </body>
</html>